<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://npmcdn.com/moralis/dist/moralis.js"></script>
<title>Airdrops</title>
</head>
<body>
<h1>Guestbook Airdrop</h1>

<p>Do you have a lot of gifts to give out to people in your guestbook?</p>
<p>Simply "copy [the guestbook signers] to clipboard" and paste into the "Recipient Addresses" field below.</p>
<p>Next, enter the contract address and token Id information of the nft you want to send. </p>
<p>This info can be found on the NFT's Opensea page.</p><br>

<h2>The form</h2>
<div style='background:#efefef;'><br>
<label>Recipient Addresses: </label><input type='text' placeholder="0x.." id='recipients'/> <br>
<label>Contract Address:</label><input type='text' placeholder="0x.." id='contractAddress'/> <br>
<label>Token Id:</label><input type='text' placeholder='1' id='tokenId'/><br>
<button onclick="runcode()"> Send NFT </button> <br><br>
</div>

<h2>Reference Images</h2>
<div style='background:black'>
<img src='../data/article_images/guestbooks_copywalletsaddrs.JPG'>
<img style='height:400px' src='../data/article_images/OpenSea_Token_URI.JPG'><br><br>
</div>


<br><br>
<script>
    async function runcode(){
    const web3 = await Moralis.enableWeb3();
    let addrs = document.getElementById('recipients').value.split(',') 
    for (let wallet of addrs){
    const isMetaMaskInstalled= await Moralis.isMetaMaskInstalled();
    Moralis.transfer( {type: "erc721", 
        receiver:  wallet, 
        contractAddress: document.getElementById('contractAddress').value, 
        tokenId: document.getElementById('tokenId').value
    }
    ) 

    }

    }
</script>
</body>
</html>