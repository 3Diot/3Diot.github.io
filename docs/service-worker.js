const urlsToCache=["/","index.html","main.*.js"];self.addEventListener("activate",(e=>{e.waitUntil((async()=>{self.registration.navigationPreload&&await self.registration.navigationPreload.enable()})())})),self.addEventListener("install",(async e=>{try{const a=await caches.open("cv-website-cache-v2");await a.addAll(urlsToCache),e.waitUntil(a)}catch(e){console.error("Cache operation failed:",e)}}));const putInCache=async(e,a)=>{const t=await caches.open("cv-website-cache-v2");await t.put(e,a)},deleteCache=async e=>{await caches.delete(e)};self.addEventListener("activate",(e=>{e.waitUntil((async()=>{const e=["cv-website-cache-v2"],a=(await caches.keys()).filter((a=>!e.includes(a)));await Promise.all(a.map(deleteCache))})())}));self.addEventListener("fetch",(e=>{e.respondWith((async({request:e,preloadResponsePromise:a,fallbackUrl:t})=>{const s=await caches.match(e);if(s)return s;const n=await a;if(n)return console.info("using preload response",n),putInCache(e,n.clone()),n;try{const a=await fetch(e);return putInCache(e,a.clone()),a}catch(e){return await caches.match(t)||new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}})({request:e.request,preloadResponsePromise:e.preloadResponse,fallbackUrl:"/gallery/myLittleVader.jpg"}))}));